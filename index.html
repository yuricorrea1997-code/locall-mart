<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Boteco do Vizinho | Card√°pio Digital e Pedidos" />
    <meta property="og:description" content="Pe√ßa agora seu lanche artesanal, por√ß√£o generosa ou cerveja trincando direto da sua mesa ou para viagem. " />
    <meta property="og:image" content="https://yuricorrea1997-code.github.io/Bar-do-Vizinho/botecodovizinho.png" />
    <meta property="og:url" content="https://pt.wix.com/" />
    <meta property="og:type" content="website" />

<meta name="twitter:card" content="summary_large_image">
    <title>Boteco do Vizinho</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

  <header>
    <div class="container">
        <a href="#" class="nav-logo">
            <img src="https://yuricorrea1997-code.github.io/Bar-do-Vizinho/botecodovizinho.png" alt="Boteco do Vizinho Logo">
        </a>
        
        <nav>
            <a href="#cardapio">
                <i class="fas fa-utensils"></i> Card√°pio
            </a>
            <a href="#contato">
                <i class="fas fa-map-marker-alt"></i> Local
            </a>
        </nav>
    </div>
</header>

    <section class="hero">
        <div class="hero-content">
            <h2>O Ponto de Encontro da Galera</h2>
            <p>Lanches artesanais, por√ß√µes generosas e aquela cerveja trincando.</p>
            <a href="https://api.whatsapp.com/send?phone=5548920048296&text=Seja+bem+vindo+" class="btn-cta" target="_blank">
                    <i class="fab fa-whatsapp"></i> Pedir Agora
            </a>
        </div>
    </section>

    <section id="cardapio" class="menu-section">
    <div class="container">
        <!-- NOSSOS LANCHES -->
        <button class="categoria-btn" onclick="toggleCategoria('lanches', event)">
            <span>‚≠ê Nossos Lanches</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="lanches" class="categoria-conteudo">
            <div class="menu-grid">
                <div class="menu-item" onclick="adicionarAoCarrinho('X Bacon', 28.00)">
                    <div class="item-info">
                        <h4>X-Bacon</h4>
                        <p>P√£o brioche, burger 180g, muito bacon e cheddar.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 28,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('X Cora√ß√£o', 34.00)">
                    <div class="item-info">
                        <h4>X-Cora√ß√£o</h4>
                        <p>P√£o, maionese, alface, tomate, milho, ervilha, queijo e cora√ß√µes.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 34,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('X Fil√©', 32.00)">
                    <div class="item-info">
                        <h4>X-Fil√©</h4>
                        <p>P√£o, maionese, salada completa, queijo e tiras de fil√© macias.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 32,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- POR√á√ïES -->
        <button class="categoria-btn" onclick="toggleCategoria('porcoes', event)">
            <span>üçü Por√ß√µes</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="porcoes" class="categoria-conteudo">
            <div class="menu-grid">
                <div class="menu-item" onclick="adicionarAoCarrinho('Por√ß√£o de Fritas', 45.00)">
                    <div class="item-info">
                        <h4>Por√ß√£o de Fritas</h4>
                        <p>Acompanha maionese especial da casa.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 45,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Por√ß√£o de Polenta', 45.00)">
                    <div class="item-info">
                        <h4>Por√ß√£o de Polenta</h4>
                        <p>Acompanha maionese especial da casa.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 45,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CHOPPS E CERVEJAS 600ML -->
        <button class="categoria-btn" onclick="toggleCategoria('cervejas600', event)">
            <span>üç∫ Cervejas 600ml</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="cervejas600" class="categoria-conteudo">
            <div class="menu-grid">
                <div class="menu-item" onclick="adicionarAoCarrinho('Corona 600ml', 17.00)">
                    <div class="item-info">
                        <h4>Corona 600ml</h4>
                        <p>Cerveja importada.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 17,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Heineken 600ml', 17.00)">
                    <div class="item-info">
                        <h4>Heineken 600ml</h4>
                        <p>Puro malte refrescante.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 17,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Black Princess 600ml', 17.00)">
                    <div class="item-info">
                        <h4>Black Princess 600ml</h4>
                        <p>Cerveja escura.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 17,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Original 600ml', 15.00)">
                    <div class="item-info">
                        <h4>Original 600ml</h4>
                        <p>Cl√°ssica da casa.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 15,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Petra Puro Malte 600ml', 14.00)">
                    <div class="item-info">
                        <h4>Petra Puro Malte 600ml</h4>
                        <p>Puro malte de qualidade.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 14,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Amstel 600ml', 14.00)">
                    <div class="item-info">
                        <h4>Amstel 600ml</h4>
                        <p>Cerveja leve e refrescante.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 14,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Itaipava Premium 600ml', 13.00)">
                    <div class="item-info">
                        <h4>Itaipava Premium 600ml</h4>
                        <p>Sabor especial.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 13,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Itaipava Pilsen 600ml', 10.00)">
                    <div class="item-info">
                        <h4>Itaipava Pilsen 600ml</h4>
                        <p>Gelada e popular.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 10,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CERVEJAS LONG NECK -->
        <button class="categoria-btn" onclick="toggleCategoria('longnecks', event)">
            <span>üçª Cervejas Long Neck</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="longnecks" class="categoria-conteudo">
            <div class="menu-grid">
                <div class="menu-item" onclick="adicionarAoCarrinho('Corona Long Neck', 10.00)">
                    <div class="item-info">
                        <h4>Corona Long Neck</h4>
                        <p>Cerveja importada.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 10,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Heineken Long Neck', 10.00)">
                    <div class="item-info">
                        <h4>Heineken Long Neck</h4>
                        <p>Puro malte.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 10,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Stella Artois Long Neck', 10.00)">
                    <div class="item-info">
                        <h4>Stella Artois Long Neck</h4>
                        <p>Cerveja belga.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 10,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Budweiser Long Neck', 10.00)">
                    <div class="item-info">
                        <h4>Budweiser Long Neck</h4>
                        <p>American lager.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 10,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CERVEJAS SLEEK -->
        <button class="categoria-btn" onclick="toggleCategoria('sleek', event)">
            <span>ü•´ Cervejas Sleek</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="sleek" class="categoria-conteudo">
            <div class="menu-grid">
                <div class="menu-item" onclick="adicionarAoCarrinho('Corona Sleek 350ml', 7.99)">
                    <div class="item-info">
                        <h4>Corona Sleek 350ml</h4>
                        <p>Lata sleek importada.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 7,99</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Heineken Sleek 350ml', 7.99)">
                    <div class="item-info">
                        <h4>Heineken Sleek 350ml</h4>
                        <p>Lata sleek puro malte.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 7,99</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Budweiser Sleek 350ml', 6.99)">
                    <div class="item-info">
                        <h4>Budweiser Sleek 350ml</h4>
                        <p>Lata sleek americana.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 6,99</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Itaipava Premium Sleek 350ml', 5.50)">
                    <div class="item-info">
                        <h4>Itaipava Premium Sleek 350ml</h4>
                        <p>Lata sleek sabor especial.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 5,50</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Amstel Sleek 350ml', 5.50)">
                    <div class="item-info">
                        <h4>Amstel Sleek 350ml</h4>
                        <p>Lata sleek refrescante.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 5,50</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CERVEJAS LATA 350ML -->
        <button class="categoria-btn" onclick="toggleCategoria('latas350', event)">
            <span>üç∫ Cervejas Lata 350ml</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="latas350" class="categoria-conteudo">
            <div class="menu-grid">
                <div class="menu-item" onclick="adicionarAoCarrinho('Original Lata 350ml', 6.99)">
                    <div class="item-info">
                        <h4>Original Lata 350ml</h4>
                        <p>Cl√°ssica da casa.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 6,99</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Brahma Lata 350ml', 5.00)">
                    <div class="item-info">
                        <h4>Brahma Lata 350ml</h4>
                        <p>Tradicional brasileira.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 5,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Ant√°rtica Subzero 350ml', 5.00)">
                    <div class="item-info">
                        <h4>Ant√°rtica Subzero 350ml</h4>
                        <p>Super gelada.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 5,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Itaipava Pilsen Lata 350ml', 3.99)">
                    <div class="item-info">
                        <h4>Itaipava Pilsen Lata 350ml</h4>
                        <p>Popular e gelada.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 3,99</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- REFRIGERANTES -->
        <button class="categoria-btn" onclick="toggleCategoria('refrigerantes', event)">
            <span>ü•§ Refrigerantes</span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="refrigerantes" class="categoria-conteudo">
            <div class="menu-grid">
                <div class="menu-item" onclick="adicionarAoCarrinho('Coca-Cola 2 Litros', 14.99)">
                    <div class="item-info">
                        <h4>Coca-Cola 2 Litros</h4>
                        <p>Refrigerante 2L.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 14,99</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Coca-Cola 1,5 Litros', 11.00)">
                    <div class="item-info">
                        <h4>Coca-Cola 1,5 Litros</h4>
                        <p>Refrigerante 1,5L.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 11,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Coca-Cola 600ml', 7.00)">
                    <div class="item-info">
                        <h4>Coca-Cola 600ml</h4>
                        <p>Refrigerante 600ml.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 7,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Coca-Cola Lata 350ml', 5.00)">
                    <div class="item-info">
                        <h4>Coca-Cola Lata 350ml</h4>
                        <p>Lata 350ml.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 5,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>

                <div class="menu-item" onclick="adicionarAoCarrinho('Coca-Cola 200ml', 3.00)">
                    <div class="item-info">
                        <h4>Coca-Cola 200ml</h4>
                        <p>Mini lata 200ml.</p>
                    </div>
                    <div class="price-area">
                        <span class="price">R$ 3,00</span>
                        <span class="add-btn"><i class="fas fa-plus-circle"></i></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="full-menu-link">
            <a href="#" class="btn-secondary">Ver Card√°pio Completo (PDF)</a>
        </div>
    </div>
</section>

    <footer id="contato">
    <div class="container">
        <h3>Vem pro Boteco do Vizinho</h3>
        <p>
           <a 
    href="https://www.google.com/maps/search/?api=1&query=R.+Gentil+Sandin%2C+47+-+Praia+Comprida%2C+S%C3%A3o+Jos%C3%A9+-+SC" 
    target="_blank" 
    style="color: #fff; text-decoration: none;"
            >
                <i class="fas fa-location-arrow"></i> R. Gentil Sandin, 47 - Praia Comprida, S√£o Jos√© - SC
            </a>
        </p>
        <p>Aberto de Segunda a Domingo, das 08 √†s 00h</p>

        <div class="socials">
            <a href="https://www.instagram.com/botecodovizinho_/" target="_blank" style="font-size: 1.5rem;">
                <i class="fab fa-instagram"></i>
            </a>

            <a href="https://www.facebook.com/locallmartvarejo/" target="_blank" style="font-size: 1.5rem;">
                <i class="fab fa-facebook"></i>
            </a>
        </div>
        
        <p class="copyright">¬© 2025 Boteco do Vizinho</p>
    </div>
</footer>

<div id="carrinho-bar" class="carrinho-bar">
    
    <div class="carrinho-header" onclick="toggleCarrinho()">
    <div class="carrinho-info">
        <p>Total: <span id="valor-total">R$ 0,00</span></p>
       <span id="itens-count" class="carrinho-badge" data-count="0">
    0 itens 
    <i id="seta-icon" class="fas fa-chevron-up" style="margin-left: 5px;"></i>
</span>
    </div>
    <div class="carrinho-botoes">
        <button onclick="limparCarrinho()" class="btn-limpar">
            <i class="fas fa-trash"></i> Limpar
        </button>
        <button onclick="finalizarPedido(event)" class="btn-finalizar">
            <i class="fab fa-whatsapp"></i> Finalizar
        </button>
    </div>
</div>

    <div id="carrinho-body" class="carrinho-body">
        
        <div style="padding: 15px 20px; border-bottom: 1px solid #333; background-color: #222; display: flex; align-items: center; justify-content: space-between;">
            <label style="color: #FF9F1C; font-weight: bold;">Qual o n√∫mero da Mesa?</label>
            <input type="number" id="numero-mesa" placeholder="00" style="width: 60px; padding: 8px; border-radius: 5px; border: 2px solid #FF9F1C; background: #111; color: #fff; text-align: center; font-weight: bold; font-size: 1.1rem;" min="1" max="20">
        </div>

        <ul id="lista-itens">
            </ul>
    </div>
</div>

    <div id="confirmacao-custom" class="mensagem-confirmacao">
    <p id="confirmacao-texto"></p>
    <div class="confirmacao-botoes">
        <button id="btn-sim" class="btn-confirmar">Sim</button>
        <button id="btn-nao" class="btn-cancelar">N√£o</button>
    </div>
</div>

<script>
    // 1. CONSTANTE GLOBAL (Declarada APENAS uma vez)
    const WHATSAPP_NUMBER = "5548920048296"; 
    let carrinho = [];
    
// --- FUN√á√ÉO PARA AS CATEGORIAS EXPANS√çVEIS (CORRIGIDA) ---
// Adicionamos 'event' como par√¢metro para garantir que funcione corretamente
function toggleCategoria(id, event) {
    const conteudo = document.getElementById(id);
    const botao = event.currentTarget;
    
    // Alterna a classe 'aberto' no conte√∫do
    conteudo.classList.toggle('aberto');
    
    // Alterna a classe 'ativo' no bot√£o (para girar a seta)
    botao.classList.toggle('ativo');
}

// --- FUN√á√ïES DE CARRINHO (AJUSTADAS) ---

function toggleCarrinho() {
    const body = document.getElementById('carrinho-body');
    const header = document.querySelector('.carrinho-header');
    const htmlBody = document.body;
    
    body.classList.toggle('aberto');
    header.classList.toggle('aberto');
    htmlBody.classList.toggle('carrinho-aberto');
    
    // Acessibilidade: Alterna o estado ARIA
    const isExpanded = header.classList.contains('aberto');
    header.setAttribute('aria-expanded', isExpanded); 
}

function adicionarAoCarrinho(nome, preco) {
    carrinho.push({ nome, preco });
    atualizarInterface();
    if(carrinho.length === 1) {
        const body = document.getElementById('carrinho-body');
        const header = document.querySelector('.carrinho-header');
        if (!body.classList.contains('aberto')) {
            toggleCarrinho();
            scrollParaCarrinho();
        }
        document.getElementById('numero-mesa').focus();
    }
}

function removerItem(index, event) {
    if(event) event.stopPropagation();
    carrinho.splice(index, 1);
    atualizarInterface();
    if(carrinho.length === 0) {
        const body = document.getElementById('carrinho-body');
        const header = document.querySelector('.carrinho-header');
        body.classList.remove('aberto');
        header.classList.remove('aberto');
        document.body.classList.remove('carrinho-aberto');
    }
}

function atualizarInterface() {
    const lista = document.getElementById('lista-itens');
    const totalSpan = document.getElementById('valor-total');
    const countSpan = document.getElementById('itens-count');
    const barra = document.getElementById('carrinho-bar');
    const btnLimpar = document.querySelector('.btn-limpar'); // Para consist√™ncia visual
    const btnFinalizar = document.querySelector('.btn-finalizar'); // Para consist√™ncia visual

    lista.innerHTML = '';
    let total = 0;

    carrinho.forEach((item, index) => {
        total += item.preco;
        let li = document.createElement('li');
        li.innerHTML = `
            <span class="item-nome">${item.nome}</span>
            <div class="item-actions">
                <span class="item-preco">R$ ${item.preco.toFixed(2).replace('.', ',')}</span>
                <button onclick="removerItem(${index}, event)" class="btn-remove">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
        `;
        lista.appendChild(li);
    });

    totalSpan.innerText = total.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    
    // Atualiza√ß√£o do Badge e do Texto
    countSpan.setAttribute('data-count', carrinho.length);
    countSpan.innerHTML = `${carrinho.length} item(ns) <i class="fas fa-chevron-up" style="margin-left: 5px;"></i>`;

    if (carrinho.length > 0) {
        barra.style.display = 'block';
        btnLimpar.disabled = false; // HABILITA
        btnFinalizar.disabled = false; // HABILITA
    } else {
        barra.style.display = 'none';
        btnLimpar.disabled = true; // DESABILITA
        btnFinalizar.disabled = true; // DESABILITA
    }
}

// --- FUN√á√ÉO FINALIZAR PEDIDO (COMPLETA E CORRIGIDA) ---
function finalizarPedido(event) {
    if(event) event.stopPropagation();

    const btnFinalizar = document.querySelector('.btn-finalizar');
    
    if (carrinho.length === 0) {
        mostrarMensagem("Seu carrinho est√° vazio! üõí");
        return;
    }

    let mesa = document.getElementById('numero-mesa').value;

    // VALIDA√á√ÉO DE MESA (VAZIO)
    if (!mesa) {
        mostrarMensagem("Por favor, digite o n√∫mero da sua MESA! ü™ë");
        const body = document.getElementById('carrinho-body');
        if (!body.classList.contains('aberto')) {
            toggleCarrinho();
            scrollParaCarrinho();
        }
        document.getElementById('numero-mesa').focus();
        return;
    }

    // VALIDA√á√ÉO DE MESA (INTERVALO)
    const numMesa = parseInt(mesa, 10);
    if (isNaN(numMesa) || numMesa < 1 || numMesa > 20) {
        mostrarMensagem("N√∫mero de Mesa inv√°lido. Deve ser entre 1 e 20! ‚ö†Ô∏è");
        
        const body = document.getElementById('carrinho-body');
        if (!body.classList.contains('aberto')) {
            toggleCarrinho();
            scrollParaCarrinho();
        }
        document.getElementById('numero-mesa').focus();
        return;
    }
    
    // PREPARA DETALHES
    const total = carrinho.reduce((sum, item) => sum + item.preco, 0);
    
    // DESABILITA O BOT√ÉO ANTES DE ABRIR O MODAL
    btnFinalizar.disabled = true;

    // CONFIRMA√á√ÉO CUSTOMIZADA
    confirmarAcaoCustomizada(`üìã Resumo do Pedido:\n\n${resumoFormatado(total, mesa)}\n\nDeseja enviar este pedido para o WhatsApp?`, (confirmou) => {
        if (confirmou) {
            
            let mensagem = `*NOVO PEDIDO - MESA ${mesa}* üçΩÔ∏è%0A%0A`;
            
            carrinho.forEach(item => {
                mensagem += `- ${item.nome} ... R$ ${item.preco.toFixed(2).replace('.', ',')}%0A`;
            });

            mensagem += `%0A*Total: R$ ${total.toFixed(2).replace('.', ',')}*`;
            mensagem += `%0A*Mesa:* ${mesa}`;

            let link = `https://wa.me/${WHATSAPP_NUMBER}?text=${mensagem}`; 
            
            mostrarMensagem("‚úÖ Pedido enviado com sucesso! Abrindo WhatsApp...");
            
            setTimeout(() => {
                window.open(link, '_blank');
            }, 500);
            
            setTimeout(() => {
                // Limpeza e fechamento do carrinho
                carrinho = [];
                document.getElementById('numero-mesa').value = '';
                atualizarInterface();
                
                const body = document.getElementById('carrinho-body');
                const header = document.querySelector('.carrinho-header');
                body.classList.remove('aberto');
                header.classList.remove('aberto');
                document.body.classList.remove('carrinho-aberto');
                
                btnFinalizar.disabled = false; // REABILITA AP√ìS O SUCESSO
            }, 2000);
            
        } else {
            // SE CANCELAR
            mostrarMensagem("Pedido cancelado ‚ùå");
            btnFinalizar.disabled = false; // REABILITA AP√ìS O CANCELAMENTO
        }
    });
}

// --- FUN√á√ïES AUXILIARES ---

function resumoFormatado(total, mesa) {
    let resumo = '';
    const quantidadeItens = carrinho.length;
    carrinho.forEach((item) => {
        resumo += `- ${item.nome} - R$ ${item.preco.toFixed(2).replace('.', ',')}\n`;
    });
    resumo += `\nüí∞ Total: R$ ${total.toFixed(2).replace('.', ',')}`;
    resumo += `\nüì¶ ${quantidadeItens} item(ns)`;
    resumo += `\nü™ë Mesa: ${mesa}`;
    return resumo;
}

function scrollParaCarrinho() {
    setTimeout(() => {
        const carrinhoBar = document.getElementById('carrinho-bar');
        if (carrinhoBar) {
            carrinhoBar.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }, 300);
}

function confirmarAcaoCustomizada(mensagem, callback) {
    const modal = document.getElementById('confirmacao-custom');
    const texto = document.getElementById('confirmacao-texto');
    const btnSim = document.getElementById('btn-sim');
    const btnNao = document.getElementById('btn-nao');

    texto.textContent = mensagem;
    modal.classList.add('ativo');

    // Fun√ß√£o que ser√° chamada ao clicar
    const handleAction = (confirmar) => {
        modal.classList.remove('ativo');
        // Remove os listeners para evitar execu√ß√µes duplicadas
        btnSim.removeEventListener('click', handleSim);
        btnNao.removeEventListener('click', handleNao);
        // Chama a fun√ß√£o de retorno (callback) com o resultado
        callback(confirmar);
    };

    const handleSim = () => handleAction(true);
    const handleNao = () => handleAction(false);

    // Adiciona os listeners
    btnSim.addEventListener('click', handleSim);
    btnNao.addEventListener('click', handleNao);
}

function limparCarrinho() {
    if (window.event) window.event.stopPropagation();
    
    if (carrinho.length === 0) {
        mostrarMensagem("O carrinho j√° est√° vazio! ü§∑‚Äç‚ôÇÔ∏è");
        return;
    }
    
    // USANDO A NOVA FUN√á√ÉO ANIMADA
    confirmarAcaoCustomizada("Tem certeza que deseja limpar todo o carrinho?", (confirmou) => {
        if (confirmou) {
            // 1. A√ß√µes de limpeza
            carrinho = [];
            document.getElementById('numero-mesa').value = '';
            atualizarInterface();
            
            // 2. Fechar o carrinho
            const body = document.getElementById('carrinho-body');
            const header = document.querySelector('.carrinho-header');
            body.classList.remove('aberto');
            header.classList.remove('aberto');
            document.body.classList.remove('carrinho-aberto');
            
            // 3. Feedback visual ANIMADO
            mostrarMensagem("Carrinho limpo com sucesso! üóëÔ∏è");
        } else {
            // Feedback visual ANIMADO se o usu√°rio cancelar
            mostrarMensagem("A limpeza foi cancelada. üëç");
        }
    });
}

function mostrarMensagem(mensagem) {
    // Remove mensagem anterior se existir
    const mensagemAnterior = document.getElementById('mensagem-carrinho');
    if (mensagemAnterior) {
        mensagemAnterior.remove();
    }
    
    // Cria nova mensagem
    const mensagemEl = document.createElement('div');
    mensagemEl.id = 'mensagem-carrinho';
    mensagemEl.textContent = mensagem;
    mensagemEl.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: var(--primary-color);
        color: #000;
        padding: 15px 25px;
        border-radius: 10px;
        font-weight: bold;
        z-index: 1000;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        animation: fadeInOut 2s ease-in-out;
    `;
    
    document.body.appendChild(mensagemEl);
    
    // Remove a mensagem ap√≥s 2 segundos
    setTimeout(() => {
        if (mensagemEl.parentNode) {
            mensagemEl.remove();
        }
    }, 2000);
}

// ===== INICIALIZA√á√ÉO =====
document.addEventListener('DOMContentLoaded', function() {
    // Adiciona padding no body quando carrinho est√° aberto
    const style = document.createElement('style');
    style.textContent = `
        body.carrinho-aberto {
            padding-bottom: 200px;
        }
        @media (max-width: 767px) {
            body.carrinho-aberto {
                padding-bottom: 250px;
            }
        }
    `;
    document.head.appendChild(style);
    
    // üéØ Ajuste necess√°rio no HTML:
    // O JS depende que as fun√ß√µes de categoria recebam o objeto event.
    // √â necess√°rio que o HTML tamb√©m seja ajustado.
});

// Previne que o clique nos itens do carrinho feche o carrinho
document.addEventListener('click', function(event) {
    if (event.target.closest('.carrinho-body') || event.target.closest('.btn-remove')) {
        event.stopPropagation();
    }
});
</script>
    
</body>
</html>














